<!DOCTYPE html>
<html>
<head>
    <title>Smart Waste Tracking</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header class="header" style="display:flex;align-items:center;gap:18px;">
        <img src="/uploads/logo.png" alt="Logo" style="height:48px;width:auto;vertical-align:middle;margin-left:24px;">
        <span style="flex:1;text-align:center;font-size:1.5em;font-weight:bold;">Smart Waste Tracking</span>
    </header>
    <nav>
        <!-- Navigation links removed as requested -->
    </nav>
    <main>
        <h1 id="add">Smart Waste Tracking Dashboard</h1>
        <form action="/add" method="POST" enctype="multipart/form-data">
            <input type="text" name="name" placeholder="Entry Name" required>
            <input type="text" name="location" placeholder="Location" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="tel" name="phone" placeholder="Phone Number" required>
            <select name="type" required style="padding:8px;margin-right:8px;">
                <option value="">Select Waste Type</option>
                <option value="Dry Waste">Dry Waste</option>
                <option value="Wet Waste">Wet Waste</option>
                <option value="Liquid Waste">Liquid Waste</option>
                <option value="E-Waste">E-Waste</option>
                <option value="Medical Waste">Medical Waste</option>
            </select>
            <input type="number" name="amount" placeholder="Amount (kg)" required>
            <select name="status" required style="padding:8px;margin-right:8px;">
                <option value="">Select Status</option>
                <option value="Cleaned" style="color:green;font-weight:bold;">Cleaned</option>
                <option value="Not Cleaned" style="color:red;font-weight: bold;">Not Cleaned</option>
            </select>
            <input type="file" name="photo" accept="image/*">
            <button type="submit">Add Entry</button>
        </form>
        <!-- Records and widget removed as requested -->

        <!-- Records Widget -->
        <section id="records-widget" style="display:flex;gap:24px;margin:24px 0 8px 0;">
            <div style="background:#27ae60;color:#fff;padding:18px 28px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.08);min-width:160px;text-align:center;">
                <div style="font-size:2em;font-weight:bold;"><%= wasteRecords.length %></div>
                <div>Total Entries</div>
            </div>
            <div style="background:#2c3e50;color:#fff;padding:18px 28px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.08);min-width:160px;text-align:center;">
                <div style="font-size:2em;font-weight:bold;">
                    <%= wasteRecords.reduce((sum, r) => sum + (Number(r.amount) || 0), 0) %> kg
                </div>
                <div>Total Waste</div>
            </div>
        </section>

        <!-- Records Tab Section -->
        <section id="records-tab" style="margin-top:40px;">
            <h2>Records</h2>
            <div style="overflow-x:auto;">
            <table class="waste-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Amount (kg)</th>
                        <th>Location</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Status</th>
                        <th>Photo</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% wasteRecords.forEach(function(record, idx) { %>
                    <tr>
                        <td><%= record.name %></td>
                        <td><%= record.type %></td>
                        <td><%= record.amount %></td>
                        <td><%= record.location %></td>
                        <td><%= record.email %></td>
                        <td><%= record.phone %></td>
                        <td>
                            <% let statusColor = (record.status === 'Cleaned') ? 'green' : 'red'; %>
                            <span style="font-weight:bold; color: '<%= statusColor %>'">
                                <%= record.status %>
                            </span>
                        </td>
                        <td>
                            <% if (record.photo) { %>
                                <img src="<%= record.photo %>" alt="Photo" style="max-width:80px; max-height:80px;">
                            <% } %>
                        </td>
                        <td>
                            <form action="/delete/<%= idx %>" method="POST" style="display:inline;">
                                <button type="submit">Delete</button>
                            </form>
                        </td>
                    </tr>
                    <% }); %>
                </tbody>
            </table>
            </div>
        </section>
    </main>
    <footer>
        &copy; <%= new Date().getFullYear() %> Smart Waste Tracking. All rights reserved. ♻️
    </footer>
</body>
</html>
